{"version":3,"file":"game.js","sources":["/Users/mhljackson/Documents/Code/resource/app/static/js/es6/game.es6.js"],"names":[],"mappings":"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","sourcesContent":["/*jshint unused: false*/\n\nfunction ajax(url, type, data={}, success=r=>console.log(r), dataType='html'){\n  'use strict';\n  $.ajax({\n    url: url,\n    type: type,\n    dataType: dataType,\n    data: data,\n    success: success\n  });\n}\n\n(function(){\n  'use strict';\n\n  $(document).ready(init);\n\n  var autoHarvest = false;\n  var harvestTimer;\n\n  function init(){\n    $('#login').click(login);\n    $('#farm').on('click', '.buy', buyPlot);\n    $('#farm').on('click', '.plant', plant);\n    $('#farm').on('click', '.harvest', harvest);\n    $('#market').on('click', '.buyseed', buySeed);\n    $('#workers').on('click', '.harvester', hire);\n    $('#workers').on('click', '.harvestWorker', workerHarvest);\n  }\n\n  // function forest(){\n  //   var userId = $('#user').attr('data-id');\n  //   ajax(`/trees?userId=${userId}`, 'get', null, html=>{\n  //     $('#forest').empty().append(html);\n  //   });\n  // }\n\n  function workerHarvest(){\n    autoHarvest = !autoHarvest;\n    $('#harvester').toggleClass('on');\n    if(autoHarvest){\n      start('harvest');\n    } else {\n      clearInterval(harvestTimer);\n    }\n  }\n\n  function start(timer){\n    switch(timer){\n    case 'harvest':\n      harvestTimer = setInterval(harvesting, 1000);\n      break;\n    }\n  }\n\n  function harvesting(){\n    var userId = $('#user').attr('data-id');\n    $('.plot > .plot-controls > .harvest').map((i,d)=>$(d).parent().parent().attr('data-plot')).each((i,v)=>{\n      var plot = v;\n      ajax(`/harvest/${userId}`, 'put', {plot:plot}, html=>{\n        $('#farm').empty().append(html);\n        dashboard();\n      });\n    });\n    // $('.plot > .plot-controls > .harvest').parent().parent().attr('data-plot')\n  }\n\n  function hire(){\n    var userId = $('#user').attr('data-id');\n    var workerType = $(this).attr('class');\n    ajax(`/hire/${userId}/${workerType}`, 'put', null, html=>{\n      $('#workers').append(html);\n      dashboard();\n    });\n  }\n\n  function buySeed(){\n    var userId = $('#user').attr('data-id');\n    var qty = $('#cropqty').val();\n    var type = $('#croptype').val();\n    ajax(`/buy/${userId}/seed`, 'put', {qty:qty, type:type}, html=>{\n      $('#inventory').empty().append();\n      dashboard();\n    });\n\n  }\n\n  function harvest(){\n    var userId = $('#user').attr('data-id');\n    var plot = $(this).closest('.plot').attr('data-plot');\n    ajax(`/harvest/${userId}`, 'put', {plot:plot}, html=>{\n      $('#farm').empty().append(html);\n      dashboard();\n    });\n  }\n\n  function startTimer(rate, type, fn){\n    var timer;\n    var counter = 1;\n    timer = setInterval(function(){\n      if(type === 'crop'){\n        if(counter < rate){\n          counter++;\n          console.log('growing...');\n          $('#timer').text(counter);\n        } else {\n          fn();\n          clearInterval(timer);\n        }\n      }\n      if(type === 'depletion'){\n        if((counter%rate) !== 0){\n          counter++;\n          console.log('depleting...');\n          $('#timer').text(counter);\n        } else {\n          fn();\n          counter++;\n        }\n      }\n    }, 1000);\n  }\n\n  function plant(){\n    var userId = $('#user').attr('data-id');\n    var plot = $(this).closest('.plot').attr('data-plot');\n    var crop = $(this).siblings('#crop').val().toLowerCase();\n\n\n    ajax(`/plant/${userId}`, 'put', {plot:plot, crop:crop}, html=>{\n      if(html){\n        $('#farm').empty().append(html);\n        inventory();\n\n\n        ajax(`/grow/${userId}`, 'get', {plot:plot}, crop=>{\n          startTimer(crop.growthRate, 'crop', ()=>{\n\n\n            ajax(`/mature/${userId}`, 'put', {plot:plot}, html=>{\n              $('#farm').empty().append(html);\n            });\n          });\n        }, 'json');\n      }\n    });\n  }\n\n  function buyPlot(){\n    var userId = $('#user').attr('data-id');\n    var plot = $(this).closest('.plot').attr('data-plot');\n    ajax('/buyplot/'+userId, 'put', {plot: plot}, html=>{\n      $('#farm').empty().append(html);\n      dashboard();\n    });\n  }\n\n  function farm(){\n    var userId = $('#user').attr('data-id');\n    ajax('/farm/'+userId, 'post', null, html=>{\n      $('#farm').empty().append(html);\n    });\n  }\n\n  function login(){\n    var username = $('#username').val();\n    ajax('/login', 'post', {username:username}, html=>{\n      $('#dashboard').empty().append(html);\n      farm();\n      // forest();\n      market();\n      workers();\n      inventory();\n      // depletion();\n    });\n  }\n\n  // function depletion(){\n  //   var userId = $('#user').attr('data-id');\n  //   ajax(`/start/${userId}`, 'get', null, user=>{\n  //     startTimer(5, 'depletion', ()=>{\n  //       ajax(`/deplete/${userId}`, 'put', null, html=>{\n  //         $('#dashboard').empty().append(html);\n  //       });\n  //     });\n  //   });\n  // }\n\n  function inventory(){\n    var userId = $('#user').attr('data-id');\n    ajax(`/users/inventory/${userId}`, 'get', null, html=>{\n      $('#inventory').empty().append(html);\n    });\n  }\n\n  function market(){\n    ajax('/market', 'get', null, html=>{\n      $('#market').empty().append(html);\n    });\n  }\n\n  function workers(){\n    var userId = $('#user').attr('data-id');\n    ajax(`/workers/${userId}`, 'get', null, html=>{\n      $('#workers').empty().append(html);\n    });\n  }\n\n  function dashboard(){\n    var userId = $('#user').attr('data-id');\n    ajax(`/users/dashboard/${userId}`, 'get', null, html=>{\n      $('#dashboard').empty().append(html);\n      inventory();\n      workers();\n    });\n  }\n\n\n\n\n})();\n"]}